const uploadFile=require("../middleware/upload.js"),upload=async(s,e)=>{try{if(await uploadFile(s,e),void 0==s.file.originalname)return e.status(400).send({message:"Please upload a file!"});e.status(200).send({message:"Uploaded the file successfully: "+s.file.originalname})}catch(a){e.status(500).send({message:`Could not upload the file: ${s.file.originalname}. ${a}`})}},getListFiles=(s,e)=>{let a=__basedir+"/resources/static/assets/uploads/";fs.readdir(a,function(s,a){s&&e.status(500).send({message:"Unable to scan files!"});let l=[];a.forEach(s=>{l.push({name:s,url:baseUrl+s})}),e.status(200).send(l)})},download=(s,e)=>{let a=s.params.name,l=__basedir+"/resources/static/assets/uploads/";e.download(l+a,a,s=>{s&&e.status(500).send({message:"Could not download the file. "+s})})};module.exports={upload,getListFiles,download};
